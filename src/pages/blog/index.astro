---
import { readdirSync } from 'fs'
import { startCase } from 'lodash-es'
import BaseHead from '../../components/BaseHead.astro'
import BaseLayout from '../../layouts/BaseLayout.astro'

const blogDirContent = readdirSync('./src/pages/blog')
const mdFiles = blogDirContent.filter(fileName => fileName.endsWith('.md'))
const slugs = mdFiles.map(fileName => fileName.replace(/.md$/, ''))
const blogPostNames = slugs.map(startCase)
---

<head>
	<BaseHead />
</head>
<body>
	<BaseLayout>
		<section class="container mb-8">
			<p>This is still under construction :)</p>
		</section>

		<section class="container">
			<h2>Blog posts</h2>

			<ul>
				{blogPostNames.map((post, index) => (
					<li>
						<a href={`/blog/${slugs[index]}`}>{post}</a>
					</li>
				))}
			</ul>
		</section>
	</BaseLayout>
</body>
